<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labour Force Survey Data Cleaning • lfsclean</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Labour Force Survey Data Cleaning">
<meta property="og:description" content="Reads in raw Labour Force Survey data obtained under the End User License from the UK Data Service 
    and applies functions to clean demographic and labour market variables. The package contains functionality to 
    clean the quarterly cross-sectional datasets beginning in Q1 1993, and the 5-quarter longitudinal datasets beginning 
    with the 2020-q1 to 2021-q1 dataset.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">lfsclean</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://gitlab.com/stapm/r-packages/lfsclean" class="external-link">
    <span class="fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html" class="external-link">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="quarterly-labour-force-survey-data-cleaning-">Quarterly Labour Force Survey data cleaning <img src="reference/figures/README-lfsclean-open.png" align="right" style="padding-left:10px;background-color:white;" width="100" height="100"><a class="anchor" aria-label="anchor" href="#quarterly-labour-force-survey-data-cleaning-"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>The motivation for <code>lfsclean</code> is to develop a set of standard functions for processing raw data from the quarterly Labour Force Survey (LFS), which is an ongoing survey of households representative of the UK population primarily collecting demographic and labour market information such as employment status, earnings, and hours of work.</p>
<p>The <code>lfsclean</code> package contains functions which read in the raw data files, processes them into clean output variables, and combines all data files into a single output data table. The functions also create real-terms values for nominally valued monetary variables (earnings and wages), allowing the user to select either the CPIH or RPI.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>lfsclean</code> is currently available only to members of the project team. To access you need to <a href="https://gitlab.com/" class="external-link">sign-up for a GitLab account</a>. You will then need to be added to the STAPM project team to gain access. If you are on a Windows machine you will also need to <a href="https://www.rdocumentation.org/packages/installr/versions/0.22.0/topics/install.Rtools" class="external-link">install Rtools</a>.<br>
Once that is sorted, you can install the latest version or a specified version from GitLab with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("devtools")</span></span>
<span><span class="co">#install.packages("getPass")</span></span>
<span><span class="co">#install.packages("git2r")</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_git.html" class="external-link">install_git</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://github.com/STAPM/lfsclean.git"</span>, </span>
<span>  build_vignettes <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Where uname is your Gitlab user name.</span></span>
<span><span class="co"># ref is the version you want to install - remove for the latest version</span></span>
<span><span class="co"># this should make a box pop up where you enter your GitLab password</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The <strong>inputs</strong> are the raw LFS data files obtained from the <a href="https://ukdataservice.ac.uk/" class="external-link">UK Data Service</a>. <strong>These must be the tab delimited versions of the data, not Stata or SPSS</strong>, and all individual tab delimited files needed must be placed together in a single directory.</p>
<p>A typical workflow for using the package looks as follows, with the read data function for each individual year contained within a global cleaning function which applies each cleaning function in turn. The collection of global cleaning functions for each year are then wrapped in a function to combine years of data.</p>
<p>The <code><a href="reference/lfsclean.html">lfsclean()</a></code> wrapper function is used to process multiple quarterly cross-sectional LFS data files into a single dataset of cleaned variables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#### read in and clean raw data using the package</span></span>
<span></span>
<span><span class="co">####################</span></span>
<span><span class="co">## input arguments</span></span>
<span></span>
<span><span class="va">root</span>  <span class="op">&lt;-</span> <span class="st">"C:/"</span></span>
<span><span class="va">file</span>  <span class="op">&lt;-</span> <span class="st">""</span> <span class="co"># path to the folder where the tab files are</span></span>
<span><span class="va">year</span>  <span class="op">&lt;-</span> <span class="fl">1993</span><span class="op">:</span><span class="fl">2023</span></span>
<span><span class="va">ages</span>  <span class="op">&lt;-</span> <span class="fl">16</span><span class="op">:</span><span class="fl">64</span></span>
<span><span class="va">keep_vars</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">complete_vars</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">deflator</span> <span class="op">&lt;-</span> <span class="st">"cpih"</span></span>
<span></span>
<span><span class="co">##############################</span></span>
<span><span class="co">### LFS data 1993 - 2022</span></span>
<span></span>
<span><span class="va">lfs_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/lfsclean.html">lfsclean</a></span><span class="op">(</span>root <span class="op">=</span> <span class="va">root</span>,</span>
<span>                     file <span class="op">=</span> <span class="va">file</span>,</span>
<span>                     year <span class="op">=</span> <span class="va">year</span>,</span>
<span>                     ages <span class="op">=</span> <span class="va">ages</span>,</span>
<span>                     keep_vars <span class="op">=</span> <span class="va">keep_vars</span>,</span>
<span>                     complete_vars <span class="op">=</span> <span class="va">complete_vars</span>,</span>
<span>                     deflator <span class="op">=</span> <span class="va">deflator</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="reference/lfsclean_5q.html">lfsclean_5q()</a></code> wrapper function is used to process the raw five-quarter longitudinal data.</p>
<div class="section level3">
<h3 id="projects">Projects<a class="anchor" aria-label="anchor" href="#projects"></a>
</h3>
<p>Some examples of projects making use of the <code>lfsclean</code> package are:</p>
<ol style="list-style-type: decimal">
<li>
<a href="https://gitlab.com/SPECTRUM_Sheffield/projects/input-output-modelling" class="external-link">Input-Output modelling</a>. Here the package is used to create full-time equivalent employment by sector and year to estimate the impacts of changing demand in different sectors on total employment.</li>
</ol>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://stapm.gitlab.io/" class="external-link">STAPM webpage</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing lfsclean</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.sheffield.ac.uk/scharr/people/staff/damon-morris" class="external-link">Damon Morris</a> <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.sheffield.ac.uk/scharr/people/staff/damon-morris" class="external-link">Damon Morris</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
